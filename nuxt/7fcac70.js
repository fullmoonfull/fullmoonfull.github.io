(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{301:function(e,t,n){var content=n(314);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(114).default)("a53ac478",content,!0,{sourceMap:!1})},313:function(e,t,n){"use strict";n(301)},314:function(e,t,n){var r=n(113)(!1);r.push([e.i,".palette[data-v-3ac11d26]{position:absolute;top:0;left:0}",""]),e.exports=r},336:function(e,t,n){"use strict";n.r(t);n(289);var r=n(13),o=n(146),c=n(147),h=n(293),l=n(294),d=n(290),f=n(29),w=(n(54),n(65),n(22),n(196),n(291)),v=n(329),m=n(315),y=n.n(m),j=n(324),k=n(327);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var x=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},M={apiKey:"AIzaSyBDrPh5AIlypoV1YT_1AXzdaEQZ9ZwFb4g",authDomain:"gamedungeon-54eae.firebaseapp.com",projectId:"gamedungeon-54eae",storageBucket:"gamedungeon-54eae.appspot.com",messagingSenderId:"702951495153",appId:"1:702951495153:web:9b2ab47320e9af90c36050",measurementId:"G-9J4C3VSS8L"},R=function(e){Object(h.a)(m,e);var t,n,l,d,f,w=O(m);function m(){var e;return Object(o.a)(this,m),(e=w.apply(this,arguments)).isShiftDown=!1,e.objects=[],e.textureList=[],e.MeshobjectList=[],e.colorcode=16693068,e.selectTexure="square-outline-textured.png",e.app=Object(j.a)(M),e.database=Object(k.a)(),e.cameraTrigger=!1,e.moveForward=!1,e.moveBackward=!1,e.moveLeftward=!1,e.moveRightward=!1,e.velocity=new v.p,e.direction=new v.p,e}return Object(c.a)(m,[{key:"created",value:(f=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.readpng();case 1:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"mounted",value:(d=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(k.a)(),e.next=3,Object(k.c)(t,"users/voxel/yourname");case 3:return n=e.sent,console.log(n),e.next=7,Object(k.b)(n,(function(e){var data=e.val();r.MeshobjectList=JSON.parse(data.dungeon),console.log(r.MeshobjectList)}));case 7:this.init(),this.render_refresh();case 9:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"init",value:function(){this.camera=new v.j(45,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.set(500,800,1300),this.camera.lookAt(0,0,0),this.scene=new v.m,this.scene.background=new v.c(15790320);var e=new v.b(50,50,50);this.rollOverMaterial=new v.g({color:16711680,opacity:.5,transparent:!0}),this.rollOverMesh=new v.f(e,this.rollOverMaterial),this.scene.add(this.rollOverMesh),this.cubeGeo=new v.b(50,50,50),this.cubeMaterial=new v.h({color:16693068,map:(new v.n).load("square-outline-textured.png")});var t=new v.e(1e3,20);this.scene.add(t),this.raycaster=new v.l,this.pointer=new v.o;var n=new v.k(1e3,1e3);n.rotateX(-Math.PI/2),this.plane=new v.f(n,new v.g({visible:!1})),this.scene.add(this.plane),this.objects.push(this.plane);var r=new v.a(6316128);this.scene.add(r);var o=new v.d(16777215);o.position.set(1,.75,.5).normalize(),this.scene.add(o),this.renderer=new v.q({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),document.addEventListener("pointermove",this.onPointerMove),document.addEventListener("pointerdown",this.onPointerDown),document.addEventListener("keydown",this.onDocumentKeyDown),document.addEventListener("keyup",this.onDocumentKeyUp),this.render_refresh(),window.addEventListener("resize",this.onWindowResize)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.render_refresh()}},{key:"onPointerMove",value:function(e){this.pointer.set(e.clientX/window.innerWidth*2-1,-e.clientY/window.innerHeight*2+1),this.raycaster.setFromCamera(this.pointer,this.camera);var t=this.raycaster.intersectObjects(this.objects,!1);if(t.length>0){var n=t[0];this.rollOverMesh.position.copy(n.point).add(n.face.normal),this.rollOverMesh.position.divideScalar(50).floor().multiplyScalar(50).addScalar(25),this.render_refresh()}}},{key:"onPointerDown",value:function(e){this.pointer.set(e.clientX/window.innerWidth*2-1,-e.clientY/window.innerHeight*2+1),this.raycaster.setFromCamera(this.pointer,this.camera);var t=this.raycaster.intersectObjects(this.objects,!1);if(t.length>0){var n=t[0];if(this.isShiftDown)n.object!==this.plane&&(this.scene.remove(n.object),this.objects.splice(this.objects.indexOf(n.object),1));else{this.cubeMaterial=new v.h({color:new v.c(this.colorcode),map:(new v.n).load(""+this.selectTexure)});var r=new v.f(this.cubeGeo,this.cubeMaterial);r.position.copy(n.point).add(n.face.normal),r.position.divideScalar(50).floor().multiplyScalar(50).addScalar(25),this.scene.add(r),this.objects.push(r);var o={color:this.colorcode,texture:this.selectTexure,point:n.point,face:n.face.normal};this.MeshobjectList.push(o),console.log(this.MeshobjectList)}this.render_refresh()}}},{key:"onDocumentKeyDown",value:function(e){if(16===e.keyCode)this.isShiftDown=!0}},{key:"onDocumentKeyUp",value:function(e){if(16===e.keyCode)this.isShiftDown=!1}},{key:"render_refresh",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"check",value:function(){console.log(this.objects)}},{key:"change_png",value:function(select){this.selectTexure=select,console.log(this.selectTexure)}},{key:"readpng",value:(l=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("textures.json");case 2:t=e.sent,this.textureList=t.data;case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"save",value:function(){console.log(this.MeshobjectList);var e=JSON.stringify(this.MeshobjectList);this.writeUserData(e)}},{key:"writeUserData",value:function(e){var t=Object(k.a)();Object(k.d)(Object(k.c)(t,"users/voxel/yourname"),{dungeon:e})}},{key:"readUserData",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(){var i,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=0;i<this.MeshobjectList.length;i++)this.cubeMaterial=new v.h({color:new v.c(this.MeshobjectList[i].color),map:(new v.n).load(""+this.MeshobjectList[i].texture)}),(t=new v.f(this.cubeGeo,this.cubeMaterial)).position.copy(this.MeshobjectList[i].point).add(this.MeshobjectList[i].face),t.position.divideScalar(50).floor().multiplyScalar(50).addScalar(25),this.scene.add(t),this.objects.push(t),this.render_refresh(),console.log(i);case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"camerachange",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cameraTrigger?(this.camera=new v.j(45,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.set(500,800,1300)):(this.camera=new v.i(1e3,-1e3,1e3,-1e3,1,1e4),this.camera.position.set(0,2e3,0)),this.camera.lookAt(0,0,0),this.render_refresh(),this.cameraTrigger=!this.cameraTrigger;case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),m}(w.Vue),L=R=x([Object(w.Component)({name:"Scene"})],R),S=(n(313),n(53)),component=Object(S.a)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"palette"},[n("div",{on:{click:function(t){return e.readUserData()}}},[e._v("readUserData")]),e._v(" "),n("div",{on:{click:function(t){return e.camerachange()}}},[e._v("cameraChange")]),e._v(" "),e._l(e.textureList,(function(t,r){return n("div",{key:r},[n("img",{attrs:{src:""+t.name},on:{click:function(n){return e.change_png(t.name)}}})])}))],2)])}),[],!1,null,"3ac11d26",null);t.default=component.exports}}]);